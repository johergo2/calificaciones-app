
Construir y publicar API con Render

https://render.com/ => En esta página se inicia sesión con una cuenta de Google o GitHub (lo hice con GitHub)

Usuario: johergo2 (Usuario GitHub)
Contraseña: johergo919

En la carpeta "C:\Desarrollos\API_Usuarios" está el código fuente del API y se conecta con GitHub

Despues de ingresar a Render, vamos al dashboard: https://dashboard.render.com/

CREACIÓN BASE DE DATOS EN RENDER

Name: db_api_usuarios
Database: db_api_usuarios
User: usuario_api
Region: Ohio (US East)

Internal Database URL: postgresql://usuario_api:qLOEsZzJHzqjNBEQDuwEjGXL2dGU4Aq5@dpg-d4s5b77diees73dkljd0-a/db_api_usuarios
                       postgresql://usuario_api:password@host:5432/db_api_usuarios


External Database URL: postgresql://usuario_api:qLOEsZzJHzqjNBEQDuwEjGXL2dGU4Aq5@dpg-d4s5b77diees73dkljd0-a.ohio-postgres.render.com/db_api_usuarios

Usuario: usuario_api
Contraseña: qLOEsZzJHzqjNBEQDuwEjGXL2dGU4Aq5



-- Activar entorno virtual python:
En CMD ejecuta: C:\Desarrollos\API_Usuarios\.venv\Scripts\activate
-- Para ejecutar el archivo "C:\Desarrollos\API_Usuarios\requeriments.txt"
pip install -r requirements.txt --verbose


-- Activar uvicorns para poder ejecutar las API desde el PC (localmente)
Abrir CMD y ubicarse en "C:\Desarrollos\API_Usuarios"
ejecuta: .venv\Scripts\activate
ejecuta: uvicorn app.main:app --reload --host 0.0.0.0 --port 8000  -- Con esto puedo ejecutar la API con URL Localhost


-- Carpeta donde se creó el proyecto Vite: C:\Calificaciones
-- Instalar dependencias : En CMD ejecutar C:\Calificaciones>npm install
-- Reiniciar : En CMD ejecutar C:\Calificaciones>npm run dev

-- Si queremos limpiar caché para luego reinstalar dependencias en CMD: 
C:\Calificaciones>rmdir /s /q node_modules
C:\Calificaciones>npm install
C:\Calificaciones>npm run dev




-- Para abrir VSCode desde la carpeta del BackEnd: 
Abrir CMD
cd C:\Desarrollos\API_Usuarios\code .

En el archivo del PC C:\Desarrollos\API_Usuarios\app\database.py modificar DATABASE_URL = "postgresql+asyncpg://usuario_api:qLOEsZzJHzqjNBEQDuwEjGXL2dGU4Aq5@dpg-d4s5b77diees73dkljd0-a.ohio-postgres.render.com/db_api_usuarios"
con el valor de External Database URL (adicionar +asyncpg)

-- Para publicar en GitHub mi proyecto Front
Se debe ingresar a CMD a la carpeta C:\Calificaciones
Ejecutar: git init
Verificar con: git status (debe listar todos los archivos de la carpeta)
Agregar todos los archivos: git add .
Crear el commit: git commit -m "Crear proyecto Calificaciones"
Ingresar a GitHub: https://github.com/ (Usuario: johergo2 (Usuario GitHub) Contraseña: johergo919)
Click en New Repository
Colocar nombre al repositorio: calificaciones-app
No agregar README
Click en Create Repository
Conecta el repositorio ejecutando desde C:\Calificaciones (CMD o VSCode): git remote add origin https://github.com/johergo2/calificaciones-app.git
Verificar la conexión: git remote -v (debe mostrar la URL con (fetch y push)
Ejecutar para renombrar la Rama Master por main (así lo requiere GitHub): git branch -M main
Ejecutar para subir los archivos del primer commit a GitHub: git push -u origin main
Ingresar a Render y Click en New => Static Site
Selecciona tu repositorio del frontend creado en GitHub (calificaciones-app)
En Branch: main
En Buid Command: npm install && npm run build
En Publish Directory: dist
Click en: Deploy Static Site
Render genera la URL: https://calificaciones-app.onrender.com (esta es la pantalla de Login)


-- Subir los cambios a GitHub desde C:\Desarrollos\API_Usuarios\app, luego Render identifica los cambios y realiza el deploy automáticamente
git add .
git commit -m "Ajuste de CORS en main.py"
git push origin main


-- Para que el BackEnd se ejecute en mi PC (esto se ejecuta en CMD en C:\Desarrollos\API_Usuarios)
.venv\Scripts\activate
uvicorn app.main:app --reload 
Así las URL de las APIs serían: http://localhost:8000/api/eventos

-- Para que el BackEnd se ejecute en el servidor Render
Render ejecuta automáticamente: uvicorn app.main:app --host 0.0.0.0 --port 10000
Así las URL de las APIs serían: https://api-usuarios-f1im.onrender.com/api/eventos


http://localhost:8000/docs
Aquí está la documentación de la API

-- Endpoints
http://localhost:8000/api/usuarios
GET /api/usuarios
GET /api/usuarios/nombre/Carlos López
GET /api/usuarios/1

-- PANTALLA USUARIOS
Esta es la API pública: https://api-usuarios-f1im.onrender.com
PAra consultar los usuarios: https://api-usuarios-f1im.onrender.com/api/usuarios
Para consultar usuario por nombre: https://api-usuarios-f1im.onrender.com/api/usuarios/nombre/Jorge Gomez 3



Se instaló Node.js
Se creó el proyecto calificaciones (no puede tener mayúsculas)
Se creó el proyecto Vite + React + TypeScript
Se creó la URL: Local:   http://localhost:5173/

-- Carpeta donde se creó el proyecto Vite: C:\Calificaciones

-- Instalar dependencias : En CMD ejecutar C:\Calificaciones>npm install
-- Reiniciar : En CMD ejecutar C:\Calificaciones>npm run dev

-- OJO: Para ejecutar la pantalla de Login: http://localhost:5173/
--      Para ejecutar las API localmente: http://localhost:8000/api/usuarios

-- PANTALLA CREACION EVENTOS
https://api-usuarios-f1im.onrender.com/api/eventos
https://api-usuarios-f1im.onrender.com/api/eventos/{id}
https://api-usuarios-f1im.onrender.com/api/usuarios


--   OJO (LOCALMENTE)
Para ejecutar la pantalla de Login: http://localhost:5173/
Para ejecutar las API localmente: http://localhost:8000/api/usuarios (En CMD se debe ejecutar .venv\Scripts\activate)

-- OJO (RENDER.COM)
Para ejecutar la pantalla de Login: https://calificaciones-app.onrender.com
Para ejecutar las API desde render.com: https://api-usuarios-f1im.onrender.com/api/eventos?usuario_id=1
Para ejecutar las API desde render.com: https://api-usuarios-f1im.onrender.com/api/eventos/19?usuario_id=1
Para ejecutar las API desde render.com: https://api-usuarios-f1im.onrender.com/api/eventos/20/categorias?usuario_id=1 
Para ejecutar las API desde render.com: https://api-usuarios-f1im.onrender.com/api/participantes-categorias-eventos?evento_id=20&cedula=800923001&usuario_id=2 (participantes-categorias-eventos)
Para ejecutar las API desde render.com: https://api-usuarios-f1im.onrender.com/api/jurados-categorias-eventos?evento_id=19&cedula=66458957&usuario_id=2 (jurados-categorias-eventos)
Para ejecutar las API desde render.com: https://api-usuarios-f1im.onrender.com/api/calificaciones?usuario_id=2 (calificaciones)
Para ejecutar las API desde render.com: https://api-usuarios-f1im.onrender.com/api/calificacionestot?evento_id=19&usuario_id=2 (calificacionestot)
Para ejecutar las API desde render.com: https://api-usuarios-f1im.onrender.com/api/calificacionesranking?evento_id=19&usuario_id=1 (calificacionesranking)


Crear pantalla de gestión usuarios
Inlcuir usuario en todas las pantallas